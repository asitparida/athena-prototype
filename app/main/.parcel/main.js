process.env.HMR_PORT=0;process.env.HMR_HOSTNAME="localhost";parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"bzVR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("electron");function l(){const l=e.Menu.buildFromTemplate([{label:"All Clips"},{label:"Workspace",submenu:[{label:"Workspace #1"},{label:"Workspace #2"},{label:"Workspace #3"}]}]);e.app.dock.setMenu(l),e.app.dock.show()}exports.BuildMenu=l;
},{}],"6beC":[function(require,module,exports) {
module.exports="/owl.34a066de.png";
},{}],"jrzg":[function(require,module,exports) {
"use strict";function e(){const e=__dirname.split("/");return e.splice(0,e.length-2).join("/")+"/electron-ipc.js"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetIpcFileFixUrl=e;
},{}],"06rE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("electron"),r=require("url"),o=require("./ipc-helper"),t=require("../main"),{resolve:n}=require("app-root-path"),a=require("electron-is-dev");function l(){const l=new e.BrowserWindow({width:300,height:200,show:!1,transparent:!0,fullscreenable:!1,vibrancy:"ultra-dark",alwaysOnTop:!0,skipTaskbar:!0,frame:!1,webPreferences:{webSecurity:!1,scrollBounce:!0,nodeIntegration:!1,preload:o.GetIpcFileFixUrl()}});l.API_PORT=t.API_PORT,l.once("ready-to-show",()=>{l.show(),l.focus()});const s=r.format({pathname:n("app/widgets/annotator/.parcel/production/index.html"),protocol:"file:",slashes:!0}),i=a?"http://localhost:1125":s;return l.setMenu(null),l.loadURL(i),l}exports.BuildAnnotator=l;
},{"./ipc-helper":"jrzg","../main":"ZCfc"}],"PTX7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("electron"),l=require("../assets/owl.png"),t=require("./annotator");let r=null;function c(c){const o=e.nativeImage.createFromPath(__dirname+l);o.resize({width:30,height:30}),(r=new e.Tray(o)).setImage(o);const a=()=>{c.isFocused()||c.focus()},i=e.Menu.buildFromTemplate([{label:"New Note",click:()=>{t.BuildAnnotator()}},{label:"All Clips",click:a},{label:"Workspace #1",click:a},{label:"Workspace #2",click:a},{label:"Workspace #3",click:a}]);r.setContextMenu(i)}exports.BuildTray=c;
},{"../assets/owl.png":"6beC","./annotator":"06rE"}],"qH2W":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("electron"),r=e(require("lodash"));function s(){t.screen.getAllDisplays().filter(e=>0!==e.bounds.x||0!==e.bounds.y)}exports.GetExternalDisplay=s;const n=e=>{const r=e.getBounds(),s=t.screen.getDisplayNearestPoint({x:r.x,y:r.y});e.setBounds(s.bounds,!0)};exports.onMovedDebounced=r.debounce(n,200);
},{}],"a9Cf":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("express"),s=require("cors"),r=e(require("body-parser")),o=require("lowdb"),n=require("lowdb/adapters/FileSync"),i=new n("athena_db.json"),a=o(i);a.defaults({notes:[]}).write();const u=t();function d(e){const t={};if(e.query)for(const s in e.query)t[s]=e.query[s];return t}u.use(s()),u.use(r.urlencoded({extended:!0})),u.use(r.json()),u.get("/api/meta/",(e,t)=>{t.json({data:"AWESOME"})}),u.post("/api/stickies/",(e,t)=>{const s=e.body;let r=a.defaults({posts:[]}).get("notes").value();s.id?r=r.filter(e=>e.id!==s.id):s.id=`${Math.floor(1e9*Math.random())}`,a.set("notes",[].concat(...r,s)).write(),t.json({data:s})}),u.get("/api/stickies/unassigned",(e,t)=>{const s=a.get("notes").filter({assigned:!1}).value();t.json({data:s})}),exports.default=u;
},{}],"exEY":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const r=e(require("./app")),t=require("helmet"),o=require("compression"),s=require("net");function n(e){return new Promise((r,t)=>{!function e(r,t){const o=s.createServer();o.listen(r,()=>{o.once("close",()=>{t(r)}),o.close()}),o.on("error",()=>{e(++r,t)})}(e,r)})}async function u(){r.default.use(t()),r.default.use(o()),r.default.disable("x-powered-by");const e=await n(1e3);r.default.listen(e,()=>console.log("Starting ExpressJS API server on Port 8081"));return{server:r.default,API_PORT:e}}exports.GetAPIServer=u;
},{"./app":"a9Cf"}],"OBnq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("electron"),t=require("url"),{resolve:r}=require("app-root-path");let l;function o(){l=new e.BrowserWindow({title:"Project Athena",width:300,height:300,show:!0,transparent:!0,resizable:!1,fullscreenable:!1,titleBarStyle:"customButtonsOnHover",maximizable:!1,minimizable:!1,closable:!1,alwaysOnTop:!0,frame:!1});const o=t.format({pathname:r("build/splash.html"),protocol:"file:",slashes:!0});return l.loadURL(o),l}exports.GetSplashWindow=o;
},{}],"kWfh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("electron");function l(){const l=[{label:e.app.getName(),submenu:[{label:"New",accelerator:"Command+R",click(){console.log("go!")}},{label:"Save",click(){console.log("go!")}},{label:"Sync",click(){console.log("go!")}},{type:"separator"},{role:"Quit"}]},{label:"View",submenu:[{label:"Reload",click:()=>{e.app.relaunch(),e.app.exit()}},{label:"Toggle Full Screen",accelerator:(()=>"darwin"===process.platform?"Ctrl+Command+F":"F11")(),click:(e,l)=>{l&&l.setFullScreen(!l.isFullScreen())}},{label:"Toggle Developer Tools",accelerator:(()=>"darwin"===process.platform?"Alt+Command+I":"Ctrl+Shift+I")(),click:(e,l)=>{l&&l.toggleDevTools()}},{type:"separator"},{label:"App Menu Demo",click:(l,o)=>{if(o){const l={type:"info",title:"Application Menu Demo",buttons:["Ok"],message:"This demo is for the Menu section, showing how to create a clickable menu item in the application menu."};e.dialog.showMessageBox(o,l)}}}]},{label:"Window",submenu:[{label:"Close",click:(l,o)=>{o&&(1===o.id&&e.BrowserWindow.getAllWindows().forEach(e=>{e.id>1&&e.close()}),o.close())}}]}];return e.Menu.buildFromTemplate(l)}exports.GetApplictaionMenu=l;
},{}],"ZCfc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./helpers/dock"),r=require("./helpers/tray"),t=require("./helpers/screen"),o=require("url"),n=require("./helpers/annotator"),i=require("./helpers/ipc-helper"),l=require("../api/server"),a=require("./helpers/splash"),s=require("./helpers/menu"),u=require("electron"),{BrowserWindow:p,app:c,Menu:h}=u,d=require("electron-is-dev"),{resolve:P}=require("app-root-path");exports.API_PORT=null,c.on("ready",async()=>{e.BuildMenu(),c.setName("Project Athena");const w=a.GetSplashWindow(),q=u.screen.getPrimaryDisplay().size,y=new p({title:"Project Athena",width:q.width,height:q.height-22,show:!1,transparent:!0,resizable:!1,fullscreenable:!1,titleBarStyle:"hidden",vibrancy:"ultra-dark",thickFrame:!1,webPreferences:{webSecurity:!1,scrollBounce:!0,nodeIntegration:!1,preload:i.GetIpcFileFixUrl()}}),A=s.GetApplictaionMenu();h.setApplicationMenu(A),r.BuildTray(y),y.setVibrancy("ultra-dark"),y.once("ready-to-show",()=>{setTimeout(()=>{w.destroy(),setTimeout(()=>{y.show()},30)},2e3)}),y.on("move",t.onMovedDebounced.bind(this,y));const m=o.format({pathname:P("app/renderer/.parcel/production/index.html"),protocol:"file:",slashes:!0}),b=d?"http://localhost:1124":m;y.setMenu(null),y.loadURL(b),u.ipcMain.on("launch-annotator",()=>{n.BuildAnnotator()});const v=await l.GetAPIServer();exports.API_PORT=v.API_PORT,y.API_PORT=v.API_PORT}),c.on("window-all-closed",c.quit);
},{"./helpers/dock":"bzVR","./helpers/tray":"PTX7","./helpers/screen":"qH2W","./helpers/annotator":"06rE","./helpers/ipc-helper":"jrzg","../api/server":"exEY","./helpers/splash":"OBnq","./helpers/menu":"kWfh"}]},{},["ZCfc"], null)
//# sourceMappingURL=/main.js.map